/**
 * Main Window Stylesheet (SCSS) for Digital Workshop Application
 * 
 * This SCSS file provides a structured approach to styling with variables,
 * mixins, and nested selectors for better maintainability.
 * 
 * Compile to CSS using: sass main_window.scss main_window.css
 */

// ================================
// COLOR VARIABLES
// ================================

// Primary colors
$primary-blue: #0078d4;
$primary-blue-hover: #106ebe;
$primary-blue-light: #e1f1ff;

// Neutral colors
$white: #ffffff;
$light-gray: #f5f5f5;
$medium-gray: #e0e0e0;
$dark-gray: #d0d0d0;
$gray: #a0a0a0;
$black: #000000;

// Status colors
$success-bg: #d4edda;
$success-color: #155724;
$success-border: #c3e6cb;

$warning-bg: #fff3cd;
$warning-color: #856404;
$warning-border: #ffeeba;

$error-bg: #f8d7da;
$error-color: #721c24;
$error-border: #f5c6cb;

// Dark mode colors
$dark-bg: #2d2d30;
$dark-bg-secondary: #3e3e42;
$dark-bg-tertiary: #1e1e1e;
$dark-fg: #f1f1f1;

// ================================
// TYPOGRAPHY VARIABLES
// ================================

$font-family: "Segoe UI", Arial, sans-serif;
$font-size-base: 9pt;
$font-size-small: 8pt;
$font-weight-normal: normal;
$font-weight-bold: bold;

// ================================
// SPACING VARIABLES
// ================================

$spacing-xs: 2px;
$spacing-sm: 4px;
$spacing-md: 6px;
$spacing-lg: 8px;
$spacing-xl: 12px;
$spacing-xxl: 16px;

// ================================
// BORDER VARIABLES
// ================================

$border-radius-sm: 2px;
$border-radius-md: 4px;
$border-radius-lg: 8px;
$border-radius-full: 50%;

// ================================
// MIXINS
// ================================

@mixin button-base {
    background-color: $light-gray;
    color: $black;
    border: 1px solid $dark-gray;
    padding: $spacing-md $spacing-xl;
    border-radius: $border-radius-sm;
    font-weight: $font-weight-normal;
    min-width: 80px;
    
    &:hover {
        background-color: $medium-gray;
        border: 1px solid $primary-blue;
    }
    
    &:pressed {
        background-color: $dark-gray;
    }
    
    &:disabled {
        background-color: #f0f0f0;
        color: $gray;
        border: 1px solid $medium-gray;
    }
}

@mixin input-base {
    background-color: $white;
    color: $black;
    border: 1px solid $dark-gray;
    padding: $spacing-sm $spacing-md;
    border-radius: $border-radius-sm;
    
    &:focus {
        border: 2px solid $primary-blue;
        outline: none;
    }
    
    &:disabled {
        background-color: $light-gray;
        color: $gray;
    }
}

@mixin status-indicator($bg-color, $color, $border-color) {
    border-radius: $border-radius-md;
    padding: $spacing-xs $spacing-md;
    font-size: $font-size-small;
    background-color: $bg-color;
    color: $color;
    border: 1px solid $border-color;
}

@mixin focus-indicator {
    &:focus {
        border: 2px solid $primary-blue;
        outline: 2px solid $primary-blue;
    }
}

// ================================
// BASE WINDOW STYLES
// ================================

QMainWindow {
    background-color: $white;
    color: $black;
    font-family: $font-family;
    font-size: $font-size-base;
}

// ================================
// MENU BAR STYLES
// ================================

QMenuBar {
    background-color: $light-gray;
    color: $black;
    border-bottom: 1px solid $dark-gray;
    padding: $spacing-xs;
    spacing: $spacing-xs;
    
    &::item {
        background-color: transparent;
        padding: $spacing-md $spacing-xl;
        border-radius: $border-radius-sm;
        margin: $spacing-xs;
        
        &:selected {
            background-color: $primary-blue;
            color: $white;
        }
        
        &:pressed {
            background-color: $primary-blue-hover;
        }
    }
}

QMenu {
    background-color: $white;
    color: $black;
    border: 1px solid $dark-gray;
    padding: $spacing-sm;
    
    &::item {
        padding: $spacing-md 20px;
        border-radius: $border-radius-sm;
        
        &:selected {
            background-color: $primary-blue;
            color: $white;
        }
    }
    
    &::separator {
        height: 1px;
        background-color: $medium-gray;
        margin: $spacing-sm $spacing-lg;
    }
}

// ================================
// TOOLBAR STYLES
// ================================

QToolBar {
    background-color: $light-gray;
    border: 1px solid $dark-gray;
    spacing: $spacing-sm;
    padding: $spacing-sm;
    
    &::handle {
        background-color: $dark-gray;
        width: 8px;
        margin: $spacing-sm;
    }
}

QToolButton {
    background-color: transparent;
    border: 1px solid transparent;
    padding: $spacing-md;
    border-radius: $border-radius-sm;
    min-width: 24px;
    
    &:hover {
        background-color: $medium-gray;
        border: 1px solid $primary-blue;
    }
    
    &:pressed {
        background-color: $dark-gray;
    }
    
    &:checked {
        background-color: $primary-blue;
        color: $white;
        border: 1px solid $primary-blue;
    }
}

// ================================
// STATUS BAR STYLES
// ================================

QStatusBar {
    background-color: $light-gray;
    color: $black;
    border-top: 1px solid $dark-gray;
    padding: $spacing-xs;
    
    &::item {
        border: none;
    }
}

// ================================
// DOCK WIDGET STYLES
// ================================

QDockWidget {
    background-color: $white;
    color: $black;
    border: 1px solid $dark-gray;
    font-weight: $font-weight-bold;
    
    &::title {
        background-color: $light-gray;
        padding: $spacing-md;
        border-bottom: 1px solid $dark-gray;
    }
    
    &::close-button, &::float-button {
        background-color: transparent;
        border: 1px solid transparent;
        border-radius: $border-radius-sm;
        padding: $spacing-xs;
        margin: $spacing-xs;
        
        &:hover {
            background-color: $medium-gray;
            border: 1px solid $primary-blue;
        }
    }
}

// ================================
// BUTTON STYLES
// ================================

QPushButton {
    @include button-base;
    
    &default {
        border: 1px solid $primary-blue;
        background-color: $primary-blue;
        color: $white;
        font-weight: $font-weight-bold;
        
        &:hover {
            background-color: $primary-blue-hover;
        }
    }
}

// ================================
// INPUT WIDGET STYLES
// ================================

QLineEdit, QTextEdit, QPlainTextEdit {
    @include input-base;
}

// ================================
// COMBO BOX STYLES
// ================================

QComboBox {
    @include input-base;
    min-width: 80px;
    
    &::drop-down {
        border: none;
        width: 20px;
    }
    
    &::down-arrow {
        image: none;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        border-top: 4px solid #666666;
        margin-right: $spacing-xs;
    }
    
    QAbstractItemView {
        background-color: $white;
        border: 1px solid $dark-gray;
        selection-background-color: $primary-blue;
        selection-color: $white;
        color: $black;
        padding: $spacing-xs;
    }
}

// ================================
// PROGRESS BAR STYLES
// ================================

QProgressBar {
    border: 1px solid $dark-gray;
    border-radius: $border-radius-sm;
    text-align: center;
    background-color: $white;
    color: $black;
    height: 16px;
    
    &::chunk {
        background-color: $primary-blue;
        border-radius: 1px;
    }
    
    &:disabled {
        border: 1px solid $medium-gray;
        background-color: $light-gray;
        color: $gray;
        
        &::chunk {
            background-color: $dark-gray;
        }
    }
}

// ================================
// TAB WIDGET STYLES
// ================================

QTabWidget::pane {
    border: 1px solid $dark-gray;
    background-color: $white;
}

QTabBar::tab {
    background: $light-gray;
    padding: $spacing-lg $spacing-xl;
    margin-right: $spacing-xs;
    border: 1px solid $dark-gray;
    border-bottom: none;
    color: $black;
    
    &:selected {
        background: $white;
        border-bottom: 2px solid $primary-blue;
        color: $black;
    }
    
    &:hover {
        background: $medium-gray;
    }
}

// ================================
// TABLE AND LIST VIEWS
// ================================

QTableView, QTreeView, QListView {
    background-color: $white;
    color: $black;
    border: 1px solid $dark-gray;
    gridline-color: $medium-gray;
    selection-background-color: $primary-blue;
    selection-color: $white;
    alternate-background-color: $light-gray;
    
    &::item {
        padding: $spacing-sm;
        
        &:selected {
            background-color: $primary-blue;
            color: $white;
        }
    }
}

QHeaderView::section {
    background-color: $light-gray;
    color: $black;
    padding: $spacing-sm;
    border: 1px solid $dark-gray;
    font-weight: $font-weight-bold;
}

// ================================
// SCROLL BAR STYLES
// ================================

QScrollBar {
    &vertical {
        background-color: $light-gray;
        width: 16px;
        margin: 0;
        border: 1px solid $dark-gray;
        
        &::handle {
            background-color: $dark-gray;
            min-height: 20px;
            border-radius: 8px;
            
            &:hover {
                background-color: $gray;
            }
        }
        
        &::add-line, &::sub-line {
            background-color: $light-gray;
            height: 0;
        }
    }
    
    &horizontal {
        background-color: $light-gray;
        height: 16px;
        margin: 0;
        border: 1px solid $dark-gray;
        
        &::handle {
            background-color: $dark-gray;
            min-width: 20px;
            border-radius: 8px;
            
            &:hover {
                background-color: $gray;
            }
        }
        
        &::add-line, &::sub-line {
            background-color: $light-gray;
            width: 0;
        }
    }
}

// ================================
// SPLITTER STYLES
// ================================

QSplitter::handle {
    background-color: $dark-gray;
    
    &horizontal {
        width: 2px;
    }
    
    &vertical {
        height: 2px;
    }
}

// ================================
// GROUP BOX STYLES
// ================================

QGroupBox {
    font-weight: $font-weight-bold;
    border: 2px solid $dark-gray;
    border-radius: $border-radius-md;
    margin-top: 1ex;
    padding-top: 10px;
    background-color: $white;
    color: $black;
    
    &::title {
        subcontrol-origin: margin;
        left: 10px;
        padding: 0 $spacing-sm 0 $spacing-sm;
        color: $black;
    }
}

// ================================
// CHECKBOX AND RADIO BUTTONS
// ================================

QCheckBox, QRadioButton {
    color: $black;
    background-color: transparent;
    spacing: $spacing-md;
    
    &::indicator {
        width: 16px;
        height: 16px;
    }
}

QCheckBox::indicator {
    &:unchecked {
        border: 1px solid $dark-gray;
        background-color: $white;
        border-radius: $border-radius-sm;
    }
    
    &:checked {
        border: 1px solid $primary-blue;
        background-color: $primary-blue;
        border-radius: $border-radius-sm;
        image: url(check.png);
    }
}

QRadioButton::indicator {
    &:unchecked {
        border: 1px solid $dark-gray;
        background-color: $white;
        border-radius: 8px;
    }
    
    &:checked {
        border: 1px solid $primary-blue;
        background-color: $primary-blue;
        border-radius: 8px;
        image: url(radio_check.png);
    }
}

// ================================
// SPIN BOX AND SLIDER STYLES
// ================================

QSpinBox, QDoubleSpinBox {
    @include input-base;
    
    &::up-button, &::down-button {
        subcontrol-origin: border;
        width: 16px;
    }
}

QSlider {
    &::groove {
        &horizontal {
            border: 1px solid $dark-gray;
            height: 8px;
            background: $light-gray;
            border-radius: 4px;
        }
        
        &vertical {
            border: 1px solid $dark-gray;
            width: 8px;
            background: $light-gray;
            border-radius: 4px;
        }
    }
    
    &::handle {
        &horizontal {
            background: $primary-blue;
            border: 1px solid $primary-blue;
            width: 18px;
            border-radius: 9px;
            margin: -5px 0;
        }
        
        &vertical {
            background: $primary-blue;
            border: 1px solid $primary-blue;
            height: 18px;
            border-radius: 9px;
            margin: 0 -5px;
        }
    }
}

// ================================
// DATE EDIT STYLES
// ================================

QDateEdit, QDateTimeEdit, QTimeEdit {
    @include input-base;
}

// ================================
// LABEL STYLES
// ================================

QLabel {
    color: $black;
    background-color: transparent;
}

// ================================
// ACCESSIBILITY STYLES
// ================================

// High contrast mode support
QMainWindow[highContrast="true"] {
    background-color: $black;
    color: $white;
    
    QPushButton {
        background-color: $black;
        color: $white;
        border: 2px solid $white;
        
        &:hover {
            background-color: $white;
            color: $black;
        }
    }
    
    QLineEdit {
        background-color: $black;
        color: $white;
        border: 2px solid $white;
    }
}

// Focus indicators for keyboard navigation
QPushButton, QLineEdit, QTextEdit, QComboBox, QCheckBox, QRadioButton,
QSpinBox, QDoubleSpinBox, QDateEdit {
    @include focus-indicator;
}

// ================================
// STATUS INDICATORS
// ================================

.status-indicator {
    &.status-good {
        @include status-indicator($success-bg, $success-color, $success-border);
    }
    
    &.status-warning {
        @include status-indicator($warning-bg, $warning-color, $warning-border);
    }
    
    &.status-error {
        @include status-indicator($error-bg, $error-color, $error-border);
    }
}

// ================================
// LOADING OVERLAY
// ================================

.loading-overlay {
    background-color: rgba(255, 255, 255, 0.8);
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
}

.loading-spinner {
    border: 4px solid #f3f3f3;
    border-top: 4px solid $primary-blue;
    border-radius: $border-radius-full;
    width: 40px;
    height: 40px;
    animation: spin 2s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

// ================================
// DARK MODE SUPPORT
// ================================

QMainWindow[darkMode="true"] {
    background-color: $dark-bg;
    color: $dark-fg;
    
    QMenuBar {
        background-color: $dark-bg;
        color: $dark-fg;
        border-bottom: 1px solid $dark-bg-secondary;
    }
    
    QToolBar {
        background-color: $dark-bg;
        color: $dark-fg;
        border: 1px solid $dark-bg-secondary;
    }
    
    QDockWidget {
        background-color: $dark-bg;
        color: $dark-fg;
        border: 1px solid $dark-bg-secondary;
        
        &::title {
            background-color: $dark-bg-secondary;
        }
    }
    
    QPushButton {
        background-color: $dark-bg-secondary;
        color: $dark-fg;
        border: 1px solid #555555;
        
        &:hover {
            background-color: #555555;
            border: 1px solid $primary-blue;
        }
    }
    
    QLineEdit, QTextEdit {
        background-color: $dark-bg-tertiary;
        color: $dark-fg;
        border: 1px solid $dark-bg-secondary;
    }
    
    QTableView, QTreeView, QListView {
        background-color: $dark-bg-tertiary;
        color: $dark-fg;
        border: 1px solid $dark-bg-secondary;
        alternate-background-color: #252526;
    }
}