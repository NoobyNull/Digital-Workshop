# Git Commands for Digital Workshop v0.1.5 Release

This document provides the Git commands needed to create the release branch and tag for version 0.1.5.

## Prerequisites

Before running these commands, ensure:
- You have the latest changes from the develop branch
- All changes for v0.1.5 are committed
- Version numbers are updated in `pyproject.toml` and `src/core/version_manager.py`

## Step-by-Step Release Process

### 1. Update Your Local Repository

```bash
# Ensure you're on the develop branch
git checkout develop

# Pull the latest changes
git pull origin develop

# Verify the version is set to 0.1.5
python -c "from src.core.version_manager import VersionManager; print(VersionManager.get_version())"
```

### 2. Create the Release Branch

```bash
# Create release branch from develop
git checkout -b release/v0.1.5

# Push the release branch to remote
git push -u origin release/v0.1.5
```

### 3. Final Version Verification

```bash
# Verify version in pyproject.toml
grep version pyproject.toml

# Verify version in version_manager.py
grep "VERSION =" src/core/version_manager.py
```

### 4. Merge to Main Branch

```bash
# Switch to main branch
git checkout main

# Pull latest main
git pull origin main

# Merge release branch (no fast-forward to preserve history)
git merge --no-ff release/v0.1.5 -m "Release v0.1.5: Quality and Analysis Milestone"

# Push to main
git push origin main
```

### 5. Create the Release Tag

```bash
# Create annotated tag
git tag -a v0.1.5 -m "Release v0.1.5: Quality and Analysis Milestone

- Comprehensive linting analysis (3,450+ issues identified)
- God class refactoring plan for MainWindow and ModelLibrary
- Security assessment updates for desktop application
- Code quality baseline established
- Development process improvements documented

See docs/releases/v0.1.5-release-notes.md for full details."

# Push tag to remote
git push origin v0.1.5
```

### 6. Merge Back to Develop

```bash
# Switch to develop branch
git checkout develop

# Merge the tag to ensure develop has all release changes
git merge v0.1.5 -m "Merge v0.1.5 tag back to develop"

# Push to develop
git push origin develop
```

### 7. Create GitHub Release (Optional)

If using GitHub, create a release from the tag:

```bash
# Open GitHub releases page
# Or use GitHub CLI if installed:
gh release create v0.1.5 \
  --title "Digital Workshop v0.1.5 - Quality and Analysis Milestone" \
  --notes-file docs/releases/v0.1.5-release-notes.md
```

## Alternative: Single-Command Release Script

For convenience, here's a shell script that performs the entire release:

```bash
#!/bin/bash
# save as release-v0.1.5.sh

# Configuration
VERSION="0.1.5"
RELEASE_BRANCH="release/v${VERSION}"

echo "Starting release process for v${VERSION}..."

# Update and create release branch
git checkout develop
git pull origin develop
git checkout -b ${RELEASE_BRANCH}
git push -u origin ${RELEASE_BRANCH}

# Merge to main
git checkout main
git pull origin main
git merge --no-ff ${RELEASE_BRANCH} -m "Release v${VERSION}: Quality and Analysis Milestone"
git push origin main

# Create and push tag
git tag -a v${VERSION} -m "Release v${VERSION}: Quality and Analysis Milestone

- Comprehensive linting analysis (3,450+ issues identified)
- God class refactoring plan for MainWindow and ModelLibrary
- Security assessment updates for desktop application
- Code quality baseline established
- Development process improvements documented

See docs/releases/v${VERSION}-release-notes.md for full details."
git push origin v${VERSION}

# Merge back to develop
git checkout develop
git merge v${VERSION} -m "Merge v${VERSION} tag back to develop"
git push origin develop

echo "Release v${VERSION} completed successfully!"
```

## Windows Batch Script Alternative

For Windows users, here's a batch script version:

```batch
@echo off
REM save as release-v0.1.5.bat

SET VERSION=0.1.5
SET RELEASE_BRANCH=release/v%VERSION%

echo Starting release process for v%VERSION%...

REM Update and create release branch
git checkout develop
git pull origin develop
git checkout -b %RELEASE_BRANCH%
git push -u origin %RELEASE_BRANCH%

REM Merge to main
git checkout main
git pull origin main
git merge --no-ff %RELEASE_BRANCH% -m "Release v%VERSION%: Quality and Analysis Milestone"
git push origin main

REM Create and push tag
git tag -a v%VERSION% -m "Release v%VERSION%: Quality and Analysis Milestone"
git push origin v%VERSION%

REM Merge back to develop
git checkout develop
git merge v%VERSION% -m "Merge v%VERSION% tag back to develop"
git push origin develop

echo Release v%VERSION% completed successfully!
```

## Verification Commands

After completing the release, verify everything is correct:

```bash
# List all tags
git tag -l

# Show tag details
git show v0.1.5

# Verify tag is on remote
git ls-remote --tags origin

# Check branch status
git branch -a

# Verify version in the code
python -c "from src.core.version_manager import VersionManager; print(f'Application version: {VersionManager.get_version()}')"
```

## Rollback Commands (If Needed)

If something goes wrong and you need to rollback:

```bash
# Delete local tag
git tag -d v0.1.5

# Delete remote tag
git push origin :refs/tags/v0.1.5

# Delete remote release branch
git push origin --delete release/v0.1.5

# Delete local release branch
git branch -D release/v0.1.5
```

## Notes

- Always ensure all tests pass before creating a release
- Review the release notes for accuracy
- Consider creating a backup before major operations
- If using CI/CD, ensure pipelines are green before releasing
- Document any manual steps or exceptions in the release notes

---

For questions about the release process, consult the team lead or refer to the project's contribution guidelines.